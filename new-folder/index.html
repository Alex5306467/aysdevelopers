<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–∞—Ä—Ç–æ—á–∫–∏ ¬∑ –ò—Å–ø–∞–Ω—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π (Demo)</title>
  <meta name="description" content="–ö–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–∫ –≤ Quizlet: 10 —Å–ª–æ–≤, —Ñ–ª–∏–ø –±–µ–∑ –∑–µ—Ä–∫–∞–ª–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Ä–µ–∂–∏–º '–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é' —Å –ø–æ–≤—Ç–æ—Ä–∞–º–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö." />
  <style>
    :root{
      --bg: #f4f7f5; --mint: #d8f3e3; --mint-strong: #a8dec6; --sage: #cfe8d5; --lilac: #e9e4ff; --peach: #ffe9da;
      --ink: #20322f; --muted: #5a6c67; --card: #ffffff; --accent: #3aa981; --accent-2: #6f6dbd; --shadow: 0 10px 30px rgba(32,50,47,.08); --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji';
      background:linear-gradient(160deg,var(--mint) 0%,var(--bg) 40%,var(--lilac) 100%);color:var(--ink);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .container{max-width:960px;margin:0 auto;padding:24px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:12px;background:radial-gradient(circle at 25% 25%,var(--mint-strong),var(--sage));box-shadow:var(--shadow)}
    .brand h1{font-size:18px;margin:0;font-weight:700}
    .sub{font-size:13px;color:var(--muted)}
    .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-end}
    button,.chip,select{appearance:none;border:none;cursor:pointer;border-radius:14px;padding:10px 14px;font-weight:600}
    select{background:rgba(255,255,255,.6)}
    .btn{background:var(--accent);color:#fff;box-shadow:var(--shadow)}
    .btn-ghost{background:rgba(255,255,255,.6)}
    .chip{background:rgba(255,255,255,.6);color:var(--ink);backdrop-filter:saturate(160%) blur(2px)}
    .progress{width:100%;background:rgba(255,255,255,.5);height:12px;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);margin:12px 0 20px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#56c7a2);transition:width .3s ease}
    .stage{display:grid;grid-template-columns:1fr;gap:16px}

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ + —Ñ–ª–∏–ø —Å—Ç–æ—Ä–æ–Ω */
    .card-wrap{perspective:1200px;-webkit-perspective:1200px}
    .card{position:relative;width:100%;min-height:280px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transition:transform .5s ease;overflow:hidden}
    .side{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:28px 24px;backface-visibility:hidden;-webkit-backface-visibility:hidden;transform:translateZ(0)}
    .front{transform:rotateY(0deg);background:linear-gradient(180deg,#fff 0%,var(--peach) 100%)}
    .back{transform:rotateY(180deg);background:linear-gradient(180deg,#fff 0%,var(--mint) 100%)}
    .card.flipped{transform:none!important}
    .card.flipped .front{transform:rotateY(180deg)!important}
    .card.flipped .back{transform:rotateY(0deg)!important}

    .term{font-size:36px;letter-spacing:.3px;text-align:center;margin:0 0 10px}
    .hint{font-size:14px;color:var(--muted);text-align:center;margin:0}
    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;margin-top:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center}

    .panel{background:rgba(255,255,255,.6);border-radius:var(--radius);padding:14px 16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;box-shadow:var(--shadow)}
    .stat{font-size:14px;color:var(--muted)}
    .list{margin-top:18px;display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:10px}
    details{background:rgba(255,255,255,.5);border-radius:12px;padding:10px 12px;box-shadow:var(--shadow)}
    summary{cursor:pointer;font-weight:600}
    .small{font-size:13px;color:var(--muted)}

    .end-round{display:none;margin-top:16px;padding:16px;border-radius:16px;background:rgba(255,255,255,.7);box-shadow:var(--shadow);text-align:center}
    .end-round.show{display:block}

    footer{margin-top:28px;color:var(--muted);font-size:12px;text-align:center}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono',monospace;background:#fff;border-radius:6px;border:1px solid #cbd5d1;padding:0 6px}

    @media (min-width:820px){.stage{grid-template-columns:1.2fr .8fr}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>–ö–∞—Ä—Ç–æ—á–∫–∏ ¬∑ –ò—Å–ø–∞–Ω—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π</h1>
          <div class="sub">–î–µ–º–æ ¬∑ 10 —Å–ª–æ–≤ ¬∑ —Ä–µ–∂–∏–º ¬´–ó–Ω–∞—é/–ù–µ –∑–Ω–∞—é¬ª</div>
        </div>
      </div>
      <div class="toolbar">
        <label class="chip" style="display:flex;align-items:center;gap:8px;">
          –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
          <select id="sortSelect">
            <option value="seq">–ü–æ –ø–æ—Ä—è–¥–∫—É</option>
            <option value="az">A‚ÜíZ (–ø–æ –ª–∏—Ü—É)</option>
            <option value="unknownFirst">–°–Ω–∞—á–∞–ª–∞ ¬´–Ω–µ –∑–Ω–∞—é¬ª</option>
          </select>
        </label>
        <button class="chip" id="shuffleBtn" title="–ü–µ—Ä–µ–º–µ—à–∞—Ç—å">üîÄ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
        <button class="chip" id="toggleLangBtn" title="–ü–æ–º–µ–Ω—è—Ç—å —Å—Ç–æ—Ä–æ–Ω—É">‚ÜîÔ∏è –ü–æ–º–µ–Ω—è—Ç—å —Å—Ç–æ—Ä–æ–Ω—É (ES/RU)</button>
        <button class="chip" id="restartBtn" title="–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å">‚ôªÔ∏è –°–±—Ä–æ—Å</button>
      </div>
    </header>

    <div class="progress" aria-label="–ø—Ä–æ–≥—Ä–µ—Å—Å"><div class="bar" id="bar"></div></div>

    <div class="stage">
      <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
      <div class="card-wrap">
        <article class="card" id="card">
          <section class="side front" aria-live="polite">
            <h2 class="term" id="frontTerm">‚Äî</h2>
            <p class="hint">–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∏–ª–∏ –ø—Ä–æ–±–µ–ª ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</p>
          </section>
          <section class="side back">
            <h2 class="term" id="backTerm">‚Äî</h2>
            <p class="hint" id="example">&nbsp;</p>
          </section>
        </article>
        <div class="controls">
          <button class="btn" id="flipBtn" title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å (Space)">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
        </div>
        <div class="controls">
          <button class="btn-ghost" id="dontKnowBtn" title="–ù–µ –∑–Ω–∞—é (1)">–ù–µ –∑–Ω–∞—é</button>
          <button class="btn" id="knowBtn" title="–ó–Ω–∞—é (3)">–ó–Ω–∞—é</button>
        </div>
        <div class="end-round" id="endRound">
          <div id="roundMsg">–†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω.</div>
          <div style="margin-top:10px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
            <button class="btn" id="repeatUnknownBtn">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–Ω–∞—é</button>
            <button class="btn-ghost" id="finishBtn">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
          </div>
        </div>
      </div>

      <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
      <aside>
        <div class="panel">
          <div class="stat">–ö–∞—Ä—Ç–æ—á–∫–∞ <span id="idx">1</span>/<span id="total">10</span></div>
          <div class="row small"><span>–ö–ª–∞–≤–∏—à–∏: <span class="kbd">Space</span> ‚Äî —Ñ–ª–∏–ø, <span class="kbd">1</span> ‚Äî –Ω–µ –∑–Ω–∞—é, <span class="kbd">3</span> ‚Äî –∑–Ω–∞—é</span></div>
        </div>
        <div class="list" id="miniList"></div>
        <details>
          <summary>–û –Ω–∞–±–æ—Ä–µ</summary>
          <div class="small">–°–ª–æ–≤–∞: contrase√±a, hambre, av√≠senme, podido, empanadas, parrillada, primera vez, correo, desconocidos, caduc√≥.</div>
        </details>
      </aside>
    </div>

    <footer>–†–µ–∂–∏–º ¬´–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é¬ª: –≤ –∫–æ–Ω—Ü–µ —Ä–∞—É–Ω–¥–∞ –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ, –ø–æ–∫–∞ –≤—Å–µ –Ω–µ —Å—Ç–∞–Ω—É—Ç ¬´–∑–Ω–∞—é¬ª.</footer>
  </div>

<script>
  // –î–∞–Ω–Ω—ã–µ
  const CARDS_SRC = [
    { front: 'contrase√±a', back: '–ø–∞—Ä–æ–ª—å', example: 'Por favor, no compartas tu contrase√±a con desconocidos.' },
    { front: 'hambre', back: '–≥–æ–ª–æ–¥', example: 'Tengo mucha hambre, ¬øvamos a comer?' },
    { front: 'av√≠senme', back: '—Å–æ–æ–±—â–∏—Ç–µ –º–Ω–µ / –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å', example: 'Av√≠senme si llegan tarde, por favor.' },
    { front: 'podido', back: '—Å–º–æ–≥ / —É–¥–∞–ª–æ—Å—å (participio de poder)', example: 'No he podido llamarte hoy.' },
    { front: 'empanadas', back: '—ç–º–ø–∞–Ω–∞–¥–∞—Å (–ø–∏—Ä–æ–∂–∫–∏)', example: 'Ayer probamos empanadas argentinas.' },
    { front: 'parrillada', back: '–∞—Å—Å–æ—Ä—Ç–∏ –≥—Ä–∏–ª—è', example: 'El domingo hacemos una parrillada con amigos.' },
    { front: 'primera vez', back: '–ø–µ—Ä–≤—ã–π —Ä–∞–∑', example: 'Es mi primera vez en Mendoza.' },
    { front: 'correo', back: '–ø–æ—á—Ç–∞ / –ø–∏—Å—å–º–æ', example: 'Te mand√© el contrato por correo.' },
    { front: 'desconocidos', back: '–Ω–µ–∑–Ω–∞–∫–æ–º—Ü—ã', example: 'No hables con desconocidos en la calle.' },
    { front: 'caduc√≥', back: '–∏—Å—Ç—ë–∫ —Å—Ä–æ–∫ (–≥–æ–¥–Ω–æ—Å—Ç–∏)', example: 'La tarjeta caduc√≥ el mes pasado.' }
  ];

  const els = {
    card: document.getElementById('card'), front: document.getElementById('frontTerm'), back: document.getElementById('backTerm'), example: document.getElementById('example'),
    idx: document.getElementById('idx'), total: document.getElementById('total'), bar: document.getElementById('bar'), miniList: document.getElementById('miniList'),
    endRound: document.getElementById('endRound'), roundMsg: document.getElementById('roundMsg'),
    sortSelect: document.getElementById('sortSelect'),
    buttons: {
      flip: document.getElementById('flipBtn'),
      know: document.getElementById('knowBtn'),
      dont: document.getElementById('dontKnowBtn'),
      shuffle: document.getElementById('shuffleBtn'),
      restart: document.getElementById('restartBtn'),
      toggleLang: document.getElementById('toggleLangBtn'),
      repeatUnknown: document.getElementById('repeatUnknownBtn'),
      finish: document.getElementById('finishBtn')
    }
  };

  // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞—É–Ω–¥–∞
  let reversed = false;               // –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ES‚ÜíRU (false) –∏–ª–∏ RU‚ÜíES (true)
  let grades = Array(CARDS_SRC.length).fill(null); // null|0 (–Ω–µ –∑–Ω–∞—é)|2 (–∑–Ω–∞—é)
  let unknownSet = new Set(CARDS_SRC.map((_,i)=>i));
  let orderMode = 'seq';              // seq|az|unknownFirst
  let pool = [...unknownSet];         // –∏–Ω–¥–µ–∫—Å—ã —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞
  let order = buildOrder(pool);
  let ptr = 0;                        // –ø–æ–∑–∏—Ü–∏—è –≤ order
  let flipped = false;                // –ø–æ–∫–∞–∑ –æ—Ç–≤–µ—Ç–∞

  function buildOrder(indices){
    let arr = [...indices];
    if(orderMode==='az'){
      arr.sort((a,b)=>{
        const A = (reversed?CARDS_SRC[a].back:CARDS_SRC[a].front).localeCompare((reversed?CARDS_SRC[b].back:CARDS_SRC[b].front), 'ru');
        return A;
      });
    } else if(orderMode==='unknownFirst'){
      arr.sort((a,b)=>{
        const va = grades[a]===0?0:1; const vb = grades[b]===0?0:1; return va-vb;
      });
    }
    return arr;
  }

  function currentIndex(){ return order[ptr]; }

  function render(){
    const i = currentIndex();
    const c = CARDS_SRC[i];
    els.total.textContent = order.length;
    els.idx.textContent = Math.min(ptr+1, order.length);

    els.front.textContent = reversed? c.back : c.front;
    els.back.textContent  = reversed? c.front: c.back;
    els.example.textContent = reversed? '' : (c.example||'');

    if(flipped) els.card.classList.add('flipped'); else els.card.classList.remove('flipped');

    // –ø—Ä–æ–≥—Ä–µ—Å—Å = –¥–æ–ª—è ¬´–∑–Ω–∞—é¬ª –æ—Ç –æ–±—â–µ–≥–æ –Ω–∞–±–æ—Ä–∞
    const knownCount = CARDS_SRC.length - unknownSet.size;
    els.bar.style.width = Math.round((knownCount/CARDS_SRC.length)*100) + '%';

    renderMiniList();
  }

  function renderMiniList(){
    els.miniList.innerHTML = CARDS_SRC.map((c,i)=>{
      const mark = grades[i]===2? 'üòé' : grades[i]===0? 'üòµ' : '‚Ä¢';
      const face = (reversed?c.back:c.front).slice(0,18);
      return `<button class="chip" data-jump="${i}">${mark} ${i+1}. ${face}</button>`
    }).join('');
    els.miniList.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const i = Number(btn.dataset.jump);
        const pos = order.indexOf(i);
        if(pos>=0){ ptr = pos; flipped = false; render(); }
      })
    });
  }

  function mark(know){
    const i = currentIndex();
    grades[i] = know? 2 : 0;
    if(know) unknownSet.delete(i); else unknownSet.add(i);
    // –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π
    ptr++;
    flipped = false;
    if(ptr>=order.length){
      // –†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω
      els.endRound.classList.add('show');
      const knownNow = CARDS_SRC.length - unknownSet.size;
      if(unknownSet.size>0){
        els.roundMsg.textContent = `–†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω: –∑–Ω–∞—é ${knownNow}/${CARDS_SRC.length}. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö: ${unknownSet.size}.`;
      } else {
        els.roundMsg.textContent = `–û—Ç–ª–∏—á–Ω–æ! –¢—ã –∑–Ω–∞–µ—à—å –≤—Å–µ ${CARDS_SRC.length} –∫–∞—Ä—Ç–æ—á–µ–∫ üéâ`;
        els.buttons.repeatUnknown.style.display='none';
      }
    } else {
      render();
    }
  }

  function startRound(fromUnknownOnly=true){
    els.endRound.classList.remove('show');
    pool = fromUnknownOnly? [...unknownSet] : CARDS_SRC.map((_,i)=>i);
    if(pool.length===0){ pool = CARDS_SRC.map((_,i)=>i); }
    order = buildOrder(pool);
    ptr = 0; flipped=false;
    render();
  }

  // –ö–Ω–æ–ø–∫–∏ / –∫–ª–∞–≤–∏—à–∏
  els.buttons.flip.addEventListener('click', ()=>{ flipped=!flipped; render(); });
  els.card.addEventListener('click', ()=>{ flipped=!flipped; render(); });
  els.buttons.know.addEventListener('click', ()=> mark(true));
  els.buttons.dont.addEventListener('click', ()=> mark(false));
  document.addEventListener('keydown', (e)=>{
    if(e.code==='Space'){ e.preventDefault(); flipped=!flipped; render(); }
    else if(e.key==='1'){ mark(false); }
    else if(e.key==='3'){ mark(true); }
  });

  els.buttons.repeatUnknown.addEventListener('click', ()=> startRound(true));
  els.buttons.finish.addEventListener('click', ()=> { els.endRound.classList.remove('show'); });
  els.buttons.shuffle.addEventListener('click', ()=>{ orderMode='seq'; CARDS_SRC.sort(()=>Math.random()-0.5); // –ø–µ—Ä–µ—Å—Ç–∞–≤–∏–º –∏—Å—Ö–æ–¥–Ω—ã–µ, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë–º —Ä–∞—É–Ω–¥
    startRound(pool!==null && pool.length===unknownSet.size); });
  els.buttons.restart.addEventListener('click', ()=>{ grades = Array(CARDS_SRC.length).fill(null); unknownSet = new Set(CARDS_SRC.map((_,i)=>i)); orderMode='seq'; startRound(false); });
  els.buttons.toggleLang.addEventListener('click', ()=>{ reversed=!reversed; render(); });
  els.sortSelect.addEventListener('change', (e)=>{ orderMode = e.target.value; startRound(pool && pool.length===unknownSet.size); });

  // init
  startRound(false);
</script>
</body>
</html>
